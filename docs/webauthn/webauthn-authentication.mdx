---
sidebar_position: 2
slug: /webauthn/authentication
id: webauthn-authentication
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import BrowserWindow from "@site/src/components/BrowserWindow";

# Authenticate Using FIDO Device

:::tip
Trials for WebAuthn are coming soon. Please contact developer@1kosmos.com for API details
:::

Users can authenticate login requests and other requests using a registered FIDO device.  

## **Authentication Options**


Some basic user account and tenant information is needed to register a device. This information can be found on the <a href="/devportal/dashboard" target="_blank">Developer Dashboard</a>.  

### Parameters

- `username`: Registered username
- `dns`: Tenant DNS
- `displayName`: Username to display 
- `communityId`: Community name 
- `tenantId`: Tenant tag

### Request Format

<Tabs groupId="OS" className="unique-tabs">
<TabItem value="node" label="NodeJS SDK">

- Initialize the SDK and request authentication options

```jsx
const loaded = await bidsdk.setupTenant({dns: "<your tenant DNS>", communityName: "<your community name>"}, "<your license key>");
let optionsResponse = await BIDWebAuthn.authenticationOptions("<username>", "<dns>", "<displayName>", "<communityId>", "<tenantId>");
```

</TabItem>
</Tabs>

## **Example Authentication Options Request**

We've provided an example request showing the authentications options flow in NodeJS. 

<Tabs groupId="OS" className="unique-tabs">
<TabItem value="node" label="NodeJS SDK">

```jsx
const BIDSDK = require("blockid-nodejs-helpers/BIDSDK.js");
const loaded = await BIDSDK.setupTenant(
  { dns: "developer.1kosmos.com", communityName: "devx" },
  "0005c9f8-1918-40be-aa00-e319043f7eee");

const BIDWebAuthn = require("blockid-nodejs-helpers/BIDWebAuthn.js");
let optionsResponse = await BIDWebAuthn.authenticationOptions(
  "john.doe", 
  "developer.1kosmos.com", 
  "john.doe", 
  "devx", 
  "trial", 
);
```
</TabItem>
</Tabs>

## **Example Authentication Options Response**

<Tabs groupId="responses" className="unique-tabs">
<TabItem value="200" label="200">

```jsx title="200 OK"
{
    "challenge":"ZXlKMGVYQWlPaUpLVjFRaUxDSmhiR2NpT2lKSVV6STFOaUo5LmV5SnlZVzVrSWpvaVVGbHpiRTV3V1VzeU1GcHhhVGRWYjFCUlFVTlVTekE0WjFodlNuRlBaRUl5YjJwVGRtMVhVaUlzSW1GMVpDSTZJakZyWm1sa2J5NWliRzlqYTJsa0xtTnZJaXdpYzNWaUlqb2lhbTlvYm01a2IyVXlJaXdpYVdRaU9pSjJRbGxrTlhObU5rSk9lWFpvVHpCRVZtTXlNRGxYTlU5YVQwaHlabEJCWm5Wak5scHlNVWxIVVZoeklpd2laWGh3SWpveE5qUTNPREk1TWprMGZRLkFPdjhmSlR1dnlxak9pLWx1aVgxbGVsTmkwanU4Sk85SVpLTlNVeEZBUFE",
    "rpId":"1kfido.blockid.co",
    "timeout":60000,
    "userVerification":"preferred",
    "allowCredentials":[
        {
        "type":"public-key",
        "id":"AdsogLw0q2c2BZI5a9G0_qqSUxMa-baLSd7moAtEFJWlD8_NGRD_hPHnqcCGoBV-dyPe3MG_cFyF5AraYTSuMNLSDuELyFpJaM_4uQ5C0DYEav8rAw"
        }],
        "status":"ok",
        "errorMessage":""
}
```

</TabItem>
</Tabs>


## **Authentication Result**

Once the device authentication options have been returned you have the necessary information to authenticate requests. 


### Parameters

- `id`: Authentication result ID

### Request Format

<Tabs groupId="OS" className="unique-tabs">
<TabItem value="node" label="NodeJS SDK">

- Initialize the SDK and request authentication result

```jsx
const loaded = await bidsdk.setupTenant({dns: "<your tenant DNS>", communityName: "<your community name>"}, "<your license key>");
let resultReponse = await BIDWebAuthn.authenticationResult("<id>");
```
</TabItem>
</Tabs>

## **Example Authentication Result**

We've provided an example authentication result:

<Tabs groupId="OS" className="unique-tabs">
<TabItem value="node" label="NodeJS SDK">

```jsx title="200 OK"
{
    "sub": "john.doe",
    "errorMessage": "",
    "status": "ok"
}
```

</TabItem>
</Tabs>

```jsx
{
    "rawId":"AdsogLw0q2c2BZI5a9G0_qqSUxMa-baLSd7moAtEFJWlD8_NGRD_hPHnqcCGoBV-dyPe3MG_cFyF5AraYTSuMNLSDuELyFpJaM_4uQ5C0DYEav8rAw",
    "response":
    {
        "authenticatorData":"sTxe_JkWJ4iPY-X3U7gFdwPzyPVHmNZMZ1_BtHhzDVAFYjfg9A","signature":"MEUCIDYISv6ew8GLg-AzdYiHwMMnoyOcXC-VtegeZ7arOF6NAiEA0Q0Qh0yt4YqZ15nc6_8Z1SWO8-HD6UoH2QOdpgUcV44","userHandle":"5rNSLR-3OmJveN9ydF2n3YQP6XE9DpOFTNSqEX8lRNE","clientDataJSON":"eyJ0eXBlIjoid2ViYXV0aG4uZ2V0IiwiY2hhbGxlbmdlIjoiWlhsS01HVllRV2xQYVVwTFZqRlJhVXhEU21oaVIyTnBUMmxLU1ZWNlNURk9hVW81TG1WNVNubFpWelZyU1dwdmFWVkdiSHBpUlRWM1YxVnplVTFHY0hoaFZHUldZakZDVWxGVlRsVlRla0UwV2pGb2RsTnVSbEJhUlVsNVlqSndWR1J0TVZoVmFVbHpTVzFHTVZwRFNUWkpha1p5V20xc2EySjVOV2xpUnpscVlUSnNhMHh0VG5aSmFYZHBZek5XYVVscWIybGhiVGx2WW0wMWEySXlWWGxKYVhkcFlWZFJhVTlwU2pKUmJHeHJUbGhPYlU1clNrOWxXRnB2VkhwQ1JWWnRUWGxOUkd4WVRsVTVZVlF3YUhsYWJFSkNXbTVXYWs1c2NIbE5WV3hJVlZab2VrbHBkMmxhV0doM1NXcHZlRTVxVVROUFJFazFUV3ByTUdaUkxrRlBkamhtU2xSMWRubHhhazlwTFd4MWFWZ3hiR1ZzVG1rd2FuVTRTazg1U1ZwTFRsTlZlRVpCVUZFIiwib3JpZ2luIjoiaHR0cHM6Ly8xa2ZpZG8uYmxvY2tpZC5jbyIsImNyb3NzT3JpZ2luIjpmYWxzZX0"
        },
        "authenticatorAttachment":"platform",
        "getClientExtensionResults":{},"id":"AdsogLw0q2c2BZI5a9G0_qqSUxMa-baLSd7moAtEFJWlD8_NGRD_hPHnqcCGoBV-dyPe3MG_cFyF5AraYTSuMNLSDuELyFpJaM_4uQ5C0DYEav8rAw",
        "type":"public-key"
        }
```